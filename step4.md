# 테스트 코드의 가치 
보통의 프로그래머들은 설계, 코드작성 보다는 디버깅에 많이 사용한다.

버그를 수정하는 것은 별로 어렵지는 않지만, 찾는 과정이 힘들다.<p>

테스트 코드를 가지고 테스트를 진행하면, 버그가 발생한 지점을 쉽게 파악할 수 있고, 회귀 버그를 잡는데 도움이 많이 된다.<p>
> 회귀 버그란? 프로그램을 변경하는 중 뜻하지 않게 발생한 버그를 뜻한다.

## 테스트 코드를 작성하기 가장 좋은 시점은?
프로그래밍을 시작하기 전이다.<p>
순서가 뒤바뀐 것처럼 보이지만, 테스트 코드를 작성하다 보면 원하는 기능을 추가하기 위해 무엇이 필요한지 고민하게 된다.<p>
구현보다 인터페이스에 집중하게 된다는 장점도 있다. 또한 코딩이 완료되는 정확한 시점을 파악할 수 있다.<p>
<p>
#### 코딩이 완료되는 시점은?<p>
>   테스트를 모두 통과한 시점이다.
<p>
## TDD란?
통과하지 못할 테스트 케이스를 작성하고, 이를 통과하게끔 코드를 작성하고 이 결과를 최대한 깔끔하게 리팩토링하는 과정을 말한다.<p>
> TDD도 켄트백이 만들었다고 한다.

#### 최종적으론 테스트 코드는 모든 테스트를 완전히 자동화하고, 그 결과까지 스스로 검사하게 만들자.<p>

### 여담으로...
켄트 백과 에릭감마가 만든 java 유닛 테스트 프레임 워크중에는 junit이란 것도 있다.<p>
이를 계기로 수 많은 비슷한 테스트 도구들이 만들어지는 밑거름이 됐다.
<h1> 테스트 할 샘플 코드 </h1>

Province 클래스와 Producer 클래스가 있다.

Province의 생성자는 smapleProvinceData() 함수가 만들어준 JSON 데이터를 기반으로 실행된다.

Province의 smapleProvinceData()가 있는데, 이는 앞 생성자의 인수로 쓸 JSON 데이터를 생성한다.

Province에 있는 get/set이 있고 set은 UI에서 입력한 숫자를 파싱하여 저장하는 형태이다.

Producer클래스는 단순한 데이터 저장소로 사용된다.

테스트 코드를 describe안에 it을 여러게 합쳐놓을 때, 
`cost asia = new Province(sampleProvinceData())` 로 만들어 놓으면,

테스트 끼리 하나의 객체(asia)를 상호작용하는 형태로 상요할 수 있게 되는 공유 픽스처를 생성할 수 있으므로<p>
다음과 같이 만드는것이 좋다.
```
let asia;
beforEach(funcion() {
    asia = = new Province(sampleProvinceData());
})
```

여기서 픽스처란? 테스트 실행을 위해 베이스라인으로서 사용되는 객체들의 고정된 상태.

이렇게 되면 it을 만나 테스트를 실행할 때 새로운 asia를 사용하게 된다.
즉, describe안에 있는 모든 테스트들은 똑같은 기준 데이터로부터 시작하게 된다.

# 픽스처 수정하기

사용자가 픽스처를 불러와서 그 속성이 수정되는 경우가 흔하다.

보이는 해당 패턴은 흔히볼 수 있는 테스트 코드로, 보통 설정 - 실행 - 검증 순으로 진행 된다.

 해체 혹은 청소라고 하는 네 번째 단계도 있지만, 보통 넘어간다.

 그 이유는 beforeEach가 알아서 새로운 객체를 만들어 내기 때문에.

 하지만 여러 테스트가 공유해야만 하는 픽스처인 경우에는 직접 해체 하는 작업을 해줘야 한다.
 
 샘플 코드를 보면 it 구문당 2개의 속성 검증을 하고 있는데, 이는 별로 좋지 않다.

 둘중 앞에께 실패했다면, 뒤에꺼에 대한 테스트는 진행이 안되기 때문에, it구문당 하나씩 테스트 검증을 하는게 좋다.

 하지만 여기에선 한 테스트로 묶어도 문제가 되지 않아서 묶었다.

 # 경계 조건 검사하기

테스트 값에 예상 밖의 데이터를 넣어둔다. 예를들어 자연수만 처리할 수 있는 로직이라면, 음수나 0을 넣어서 돌려보는 것이다. (엣지 케이스들)

이처럼 경계를 확인하는 테스트를 작성해보면 특이 상황을 어떻게 처리하는게 좋을지 생각해볼 수 있다.

테스트 검사할 때 실패란, 값이 예상한 범위를 벗어났다는 뜻이다.
에러는 발생한 예외 상황을 말한다. 즉, 코드 작성자가 예측하지 못한 것. 때문에 "... is not a function"이라고 출력이 된다.

이러한 오류로 인해 프로그램 내부에 잘못된 데이터가 들어가 디버깅 하기 어려운 문제가 발생하면 어서션 추가하기를 사용하자.

모든 버그를 잡아낼 수는 없다고 생각하여 테스트를 작성하지 않는다면 대다수의 버그를 잡을 수 있는 기회를 날리는 셈이다.

리펙토링 하는동안에도 계속 테스트를 추가해 가자.
